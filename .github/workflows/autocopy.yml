name: autocopy
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€

on: [push]

jobs:
  autocopy:
    runs-on: ubuntu-latest
    steps:
      - shell: bash
        env:
          MY_PAT: ${{ secrets.MY_PAT }}
        run: |
          echo "$MY_PAT"
      - name: checkout primary repo
        uses: actions/checkout@master
      - name: clone secondary repo
        run: |
          cd /home/runner/work
          mkdir missions
          git clone https://${{ secrets.MY_PAT }}@github.com/asa-niki/asa_missions.git /home/runner/work/missions
      - name: List files in the repository
        run: |
          ls /home/runner/work/missions
      - name: Copy source folder to target directories with template folder
        run: |
          # Folder to copy (source folder)
          SOURCE_FOLDER="/home/runner/work/missions"

          # Define target folder base path (one level deeper with 'template')
          TARGET_FOLDER_BASE="/home/runner/work/target_directory"

          # Check if source folder exists
          if [ ! -d "$SOURCE_FOLDER" ]; then
              echo "Source folder '$SOURCE_FOLDER' does not exist!"
              exit 1
          fi

          # Create the 'template' subfolder in the target folder if it doesn't exist
          mkdir -p "$TARGET_FOLDER_BASE/template"

          # Copy source folder into the 'template' subfolder of the target
          cp -r "$SOURCE_FOLDER/." "$TARGET_FOLDER_BASE/template/"

          echo "Copying complete!"
